# Reckit

<div align="center">

**å·¥ä¸šçº§æ¨èç³»ç»Ÿå·¥å…·åŒ… | Production-Ready Recommender System Toolkit**

[![Go Version](https://img.shields.io/badge/Go-1.25+-00ADD8?style=flat-square&logo=go)](https://golang.org)
[![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg?style=flat-square)](https://opensource.org/licenses/Apache-2.0)
[![Go Report Card](https://goreportcard.com/badge/github.com/rushteam/reckit?style=flat-square)](https://goreportcard.com/report/github.com/rushteam/reckit)

</div>

---

## ğŸ“– ç®€ä»‹

Reckit æ˜¯ä¸€ä¸ª**å·¥ä¸šçº§æ¨èç³»ç»Ÿå·¥å…·åŒ…**ï¼Œé‡‡ç”¨ **Pipeline + Node** æ¶æ„è®¾è®¡ï¼Œé€šè¿‡æ¥å£æŠ½è±¡å®ç°é«˜åº¦å¯æ‰©å±•æ€§ã€‚æ”¯æŒå†…å®¹æµã€ç”µå•†ã€å¹¿å‘Šç­‰å¤šç§æ¨èåœºæ™¯ï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿæ„å»ºç”Ÿäº§çº§æ¨èç³»ç»Ÿã€‚

### ğŸ¯ å·¥ç¨‹ç›®æ ‡

åœºæ™¯åˆ†å·¥ï¼š
- **æ·±åº¦æ¨¡å‹ã€å¤æ‚æ¢¯åº¦æ›´æ–°** â†’ é€‚ç”¨å·¥å…·ï¼š**PyTorch/Tensorflow**
- **é«˜å¹¶å‘ã€ä½å»¶è¿Ÿã€ç»Ÿè®¡è®¡ç®—** â†’ é€‚ç”¨å·¥å…·ï¼š**Golang(Reckit)**

æœ¬é¡¹ç›®é‡‡ç”¨ **PyTorch/Tensorflow + Golang** çš„åˆ†å·¥æ¨¡å¼ï¼š
- **PyTorch/Tensorflow**ï¼šè´Ÿè´£æ·±åº¦æ¨¡å‹çš„è®­ç»ƒã€å¤æ‚æ¢¯åº¦æ›´æ–°ç­‰æœºå™¨å­¦ä¹ ä»»åŠ¡
- **Golang (Reckit)**ï¼šè´Ÿè´£é«˜å¹¶å‘æ¨èæœåŠ¡ã€ä½å»¶è¿Ÿåœ¨çº¿æ¨ç†ã€ç»Ÿè®¡è®¡ç®—ç­‰ç”Ÿäº§ç¯å¢ƒä»»åŠ¡

### âœ¨ æ ¸å¿ƒäº®ç‚¹

- ğŸ¯ **Pipeline-first æ¶æ„**ï¼šé“¾å¼ Node å¤„ç†ï¼Œçµæ´»ç»„åˆæ¨èæµç¨‹
- ğŸ·ï¸ **Labels-first è®¾è®¡**ï¼šå…¨é“¾è·¯é€ä¼ ï¼Œæ”¯æŒå¯è§£é‡Šæ€§å’Œç­–ç•¥é©±åŠ¨
- ğŸ”Œ **å®Œå…¨å¯æ‰©å±•**ï¼šæ‰€æœ‰ç­–ç•¥é€šè¿‡æ¥å£å®ç°ï¼Œæ— éœ€ä¿®æ”¹åº“ä»£ç 
- âš¡ **é«˜æ€§èƒ½å¹¶å‘**ï¼šå¤šè·¯å¬å›å¹¶å‘æ‰§è¡Œï¼Œè¶…æ—¶æ§åˆ¶å’Œé™æµä¿æŠ¤
- ğŸ¨ **ç­–ç•¥æ¨¡å¼ä¸°å¯Œ**ï¼šåˆå¹¶ã€æ’åºã€é”™è¯¯å¤„ç†ç­‰ç­–ç•¥å‡å¯è‡ªå®šä¹‰
- ğŸ”§ **é…ç½®åŒ–æ”¯æŒ**ï¼šYAML/JSON é…ç½®ï¼ŒPipeline å¯é…ç½®åŒ–åŠ è½½
- ğŸš€ **å¼€ç®±å³ç”¨**ï¼šå†…ç½® 7+ å¬å›ç®—æ³•ã€6+ æ’åºæ¨¡å‹ï¼Œå¿«é€Ÿä¸Šçº¿

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### å®Œæ•´æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Request Layer                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  RecommendContext                                         â”‚ â”‚
â”‚  â”‚  - UserID, Scene, DeviceID                               â”‚ â”‚
â”‚  â”‚  - UserProfile (ç”¨æˆ·ç”»åƒ)                                 â”‚ â”‚
â”‚  â”‚  - Realtime Features (å®æ—¶ç‰¹å¾)                           â”‚ â”‚
â”‚  â”‚  - Labels (ç”¨æˆ·çº§æ ‡ç­¾)                                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Recall Layer (å¬å›å±‚)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Fanout (å¤šè·¯å¹¶å‘å¬å›)                                     â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚
â”‚  â”‚  â”‚ Hot      â”‚  â”‚ U2I-CF   â”‚  â”‚ I2I-CF   â”‚  â”‚ ANN     â”‚â”‚ â”‚
â”‚  â”‚  â”‚ çƒ­é—¨å¬å›  â”‚  â”‚ ç”¨æˆ·ååŒ  â”‚  â”‚ ç‰©å“ååŒ  â”‚  â”‚ å‘é‡æ£€ç´¢ â”‚â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚ â”‚
â”‚  â”‚  â”‚ MF/ALS   â”‚  â”‚ Content  â”‚  â”‚ History  â”‚              â”‚ â”‚
â”‚  â”‚  â”‚ çŸ©é˜µåˆ†è§£  â”‚  â”‚ å†…å®¹æ¨è  â”‚  â”‚ ç”¨æˆ·å†å²  â”‚              â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚  Merge Strategy (åˆå¹¶ç­–ç•¥)                              â”‚ â”‚
â”‚  â”‚  - First / Union / Priority                            â”‚ â”‚
â”‚  â”‚  - è‡ªå®šä¹‰ç­–ç•¥æ”¯æŒ                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ Items[] (å€™é€‰ç‰©å“é›†åˆ)
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Filter Layer (è¿‡æ»¤å±‚)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  FilterNode (ç»„åˆè¿‡æ»¤å™¨)                                  â”‚ â”‚
â”‚  â”‚  - BlacklistFilter (é»‘åå•)                               â”‚ â”‚
â”‚  â”‚  - UserBlockFilter (ç”¨æˆ·æ‹‰é»‘)                             â”‚ â”‚
â”‚  â”‚  - ExposedFilter (å·²æ›å…‰)                                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ Items[] (è¿‡æ»¤åç‰©å“)
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Feature Layer (ç‰¹å¾å±‚)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  EnrichNode (ç‰¹å¾æ³¨å…¥)                                    â”‚ â”‚
â”‚  â”‚  - User Features (ç”¨æˆ·ç‰¹å¾)                               â”‚ â”‚
â”‚  â”‚  - Item Features (ç‰©å“ç‰¹å¾)                              â”‚ â”‚
â”‚  â”‚  - Cross Features (äº¤å‰ç‰¹å¾)                             â”‚ â”‚
â”‚  â”‚  - FeatureService (ç‰¹å¾æœåŠ¡)                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ Items[] (å¸¦ç‰¹å¾ç‰©å“)
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Rank Layer (æ’åºå±‚)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Rank Models                                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”     â”‚ â”‚
â”‚  â”‚  â”‚  LR  â”‚  â”‚ DNN  â”‚  â”‚ DIN  â”‚  â”‚W&D  â”‚  â”‚ RPC  â”‚     â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜     â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚  Sort Strategy (æ’åºç­–ç•¥)                                â”‚ â”‚
â”‚  â”‚  - ScoreDesc / ScoreAsc / MultiField                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ Items[] (å·²æ’åºç‰©å“)
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ReRank Layer (é‡æ’å±‚)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Diversity (å¤šæ ·æ€§é‡æ’)                                    â”‚ â”‚
â”‚  â”‚  - ç±»åˆ«å»é‡                                                â”‚ â”‚
â”‚  â”‚  - æ‰“æ•£ç­–ç•¥                                                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ Items[] (æœ€ç»ˆç»“æœ)
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Response Layer                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Items[]                                                  â”‚ â”‚
â”‚  â”‚  - ID, Score, Features                                   â”‚ â”‚
â”‚  â”‚  - Labels (å…¨é“¾è·¯æ ‡ç­¾ï¼Œå¯è§£é‡Šæ€§)                           â”‚ â”‚
â”‚  â”‚  - Meta (å…ƒä¿¡æ¯)                                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Infrastructure Layer                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  Store   â”‚  â”‚  Vector  â”‚  â”‚  Service â”‚  â”‚  Feast   â”‚      â”‚
â”‚  â”‚ Redis/   â”‚  â”‚  Milvus  â”‚  â”‚ TF Serve â”‚  â”‚ Feature  â”‚      â”‚
â”‚  â”‚ Memory   â”‚  â”‚          â”‚  â”‚          â”‚  â”‚  Store   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è®¾è®¡æ¨¡å¼

| æ¨¡å— | è®¾è®¡æ¨¡å¼ | è¯´æ˜ |
|------|---------|------|
| **Pipeline** | Pipeline / Chain of Responsibility | é“¾å¼å¤„ç†ï¼ŒNode ä¸²è” |
| **Recall** | Strategy + Fan-out å¹¶å‘æ¨¡å¼ | å¤šè·¯å¬å›å¹¶å‘æ‰§è¡Œ |
| **Rank** | Strategy / Template Method | å¤šç§æ’åºæ¨¡å‹ç­–ç•¥ |
| **ç‰¹å¾æ³¨å…¥** | Context Object | ä¸Šä¸‹æ–‡å¯¹è±¡ä¼ é€’ |
| **å¯æ‰©å±•** | Plugin-like æ¥å£è®¾è®¡ | æ¥å£æŠ½è±¡ï¼Œæ’ä»¶åŒ–æ‰©å±• |
| **å¹¶å‘** | errgroup / goroutine pool | é«˜æ•ˆå¹¶å‘æ§åˆ¶ |
| **å­˜å‚¨æŠ½è±¡** | Store æ¥å£ | Redis / MySQL / ES ç­‰ |
| **é…ç½®åŒ–** | YAML/JSON + Factory æ¨¡å¼ | é…ç½®é©±åŠ¨ |
| **ç­–ç•¥é©±åŠ¨** | Label DSL è¡¨è¾¾å¼å¼•æ“ | åŸºäº CEL çš„è¡¨è¾¾å¼ |

## ğŸš€ å¿«é€Ÿå¼€å§‹ï¼šæ„å»ºå·¥ä¸šçº§æ¨èç³»ç»Ÿ

### ç¬¬ä¸€æ­¥ï¼šå®‰è£…

```bash
go get github.com/rushteam/reckit
```

### ç¬¬äºŒæ­¥ï¼šå®Œæ•´ç¤ºä¾‹ï¼ˆå·¥ä¸šçº§æ¨è Pipelineï¼‰

```go
package main

import (
    "context"
    "fmt"
    "time"
    
    "github.com/rushteam/reckit/core"
    "github.com/rushteam/reckit/feature"
    "github.com/rushteam/reckit/filter"
    "github.com/rushteam/reckit/model"
    "github.com/rushteam/reckit/pipeline"
    "github.com/rushteam/reckit/rank"
    "github.com/rushteam/reckit/recall"
    "github.com/rushteam/reckit/rerank"
    "github.com/rushteam/reckit/store"
)

func main() {
    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)
    defer cancel()

    // ========== 1. åˆå§‹åŒ–åŸºç¡€è®¾æ–½ ==========
    // ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ Redisï¼Œå¼€å‘ç¯å¢ƒå¯ç”¨ Memory
    memStore := store.NewMemoryStore()
    defer memStore.Close()
    
    // åˆ›å»ºååŒè¿‡æ»¤å­˜å‚¨é€‚é…å™¨
    cfStore := recall.NewStoreCFAdapter(memStore, "cf")
    
    // ========== 2. æ„å»ºå¬å›å±‚ ==========
    config := &core.DefaultRecallConfig{}
    
    // å¤šè·¯å¬å›ï¼šçƒ­é—¨ + ååŒè¿‡æ»¤ + å†…å®¹æ¨è
    fanout := &recall.Fanout{
        Sources: []recall.Source{
            // çƒ­é—¨å¬å›
            &recall.Hot{
                Store: memStore,
                Key:   "hot:feed",
            },
            // ç”¨æˆ·ååŒè¿‡æ»¤
            &recall.U2IRecall{
                Store:                cfStore,
                TopKSimilarUsers:     10,
                TopKItems:            20,
                SimilarityCalculator: &recall.CosineSimilarity{},
                Config:                config,
            },
            // ç‰©å“ååŒè¿‡æ»¤ï¼ˆå·¥ä¸šå¸¸é’æ ‘ï¼‰
            &recall.I2IRecall{
                Store:                cfStore,
                TopKSimilarItems:     10,
                TopKItems:            20,
                SimilarityCalculator: &recall.CosineSimilarity{},
                Config:                config,
            },
        },
        Dedup:         true,
        Timeout:       2 * time.Second,
        MaxConcurrent: 5,
        MergeStrategy: &recall.PriorityMergeStrategy{},
        ErrorHandler:  &recall.IgnoreErrorHandler{},
    }

    // ========== 3. æ„å»ºè¿‡æ»¤å±‚ ==========
    storeAdapter := filter.NewStoreAdapter(memStore)
    filterNode := &filter.FilterNode{
        Filters: []filter.Filter{
            // é»‘åå•è¿‡æ»¤
            filter.NewBlacklistFilter([]string{"100", "200"}, storeAdapter, "blacklist:items"),
            // ç”¨æˆ·æ‹‰é»‘è¿‡æ»¤
            filter.NewUserBlockFilter(storeAdapter, "user:block"),
            // å·²æ›å…‰è¿‡æ»¤ï¼ˆ7å¤©çª—å£ï¼‰
            filter.NewExposedFilter(storeAdapter, "user:exposed", 7*24*3600),
        },
    }

    // ========== 4. æ„å»ºç‰¹å¾å±‚ ==========
    enrichNode := &feature.EnrichNode{
        UserFeaturePrefix:  "user_",
        ItemFeaturePrefix:  "item_",
        CrossFeaturePrefix: "cross_",
        KeyUserFeatures:    []string{"age", "gender", "city"},
        KeyItemFeatures:    []string{"ctr", "cvr", "price"},
    }

    // ========== 5. æ„å»ºæ’åºå±‚ ==========
    lrNode := &rank.LRNode{
        Model: &model.LRModel{
            Bias: 0,
            Weights: map[string]float64{
                "item_ctr": 1.2,
                "item_cvr": 0.8,
                "user_age": 0.5,
                "cross_age_x_ctr": 0.2,
            },
        },
        SortStrategy: &rank.ScoreDescSortStrategy{},
    }

    // ========== 6. æ„å»ºé‡æ’å±‚ ==========
    diversityNode := &rerank.Diversity{
        LabelKey: "category",
    }

    // ========== 7. ç»„è£… Pipeline ==========
    p := &pipeline.Pipeline{
        Nodes: []pipeline.Node{
            fanout,        // å¬å›
            filterNode,    // è¿‡æ»¤
            enrichNode,    // ç‰¹å¾æ³¨å…¥
            lrNode,        // æ’åº
            diversityNode, // é‡æ’
        },
        Hooks: []pipeline.PipelineHook{
            // å¯ä»¥æ·»åŠ æ—¥å¿—ã€ç›‘æ§ç­‰ Hook
        },
    }

    // ========== 8. åˆ›å»ºç”¨æˆ·ä¸Šä¸‹æ–‡ ==========
    rctx := &core.RecommendContext{
        UserID: "user_123",
        Scene:  "feed",
        User: &core.UserProfile{
            UserID:    "user_123",
            Age:       25,
            Gender:    "male",
            Location:  "beijing",
            Interests: map[string]float64{"tech": 0.8, "game": 0.6},
        },
        Realtime: map[string]any{
            "hour":   time.Now().Hour(),
            "device": "mobile",
        },
    }

    // ========== 9. æ‰§è¡Œ Pipeline ==========
    items, err := p.Run(ctx, rctx, nil)
    if err != nil {
        panic(err)
    }

    // ========== 10. è¾“å‡ºç»“æœ ==========
    fmt.Printf("æ¨èç»“æœï¼ˆå…± %d ä¸ªç‰©å“ï¼‰:\n", len(items))
    for i, item := range items {
        sourceLabel := "unknown"
        if lbl, ok := item.Labels["recall_source"]; ok {
            sourceLabel = lbl.Value
        }
        fmt.Printf("%d. Item: %s, Score: %.4f, Source: %s\n", 
            i+1, item.ID, item.Score, sourceLabel)
    }
}
```

### ç¬¬ä¸‰æ­¥ï¼šè¿è¡Œ

```bash
go run main.go
```

## ğŸ’¡ æ ¸å¿ƒäº®ç‚¹è¯¦è§£

### 1. å¤šè·¯å¹¶å‘å¬å›

**å·¥ä¸šçº§ç‰¹æ€§**ï¼š
- âœ… å¹¶å‘æ‰§è¡Œå¤šä¸ªå¬å›æºï¼ˆerrgroupï¼‰ï¼Œæå‡æ€§èƒ½
- âœ… è¶…æ—¶æ§åˆ¶å’Œé™æµä¿æŠ¤ï¼Œä¿è¯ç¨³å®šæ€§
- âœ… è‡ªå®šä¹‰åˆå¹¶ç­–ç•¥ï¼ˆFirst / Union / Priorityï¼‰
- âœ… è‡ªå®šä¹‰é”™è¯¯å¤„ç†ç­–ç•¥ï¼ˆå¿½ç•¥/é‡è¯•/é™çº§ï¼‰
- âœ… è‡ªåŠ¨è®°å½•å¬å›æ¥æº Labelï¼Œæ”¯æŒå¯è§£é‡Šæ€§

```go
fanout := &recall.Fanout{
    Sources: []recall.Source{
        &recall.Hot{...},
        &recall.U2IRecall{...},
        &recall.I2IRecall{...},
    },
    Dedup:         true,
    Timeout:       2 * time.Second,
    MaxConcurrent: 5,
    MergeStrategy: &recall.PriorityMergeStrategy{},
    ErrorHandler:  &recall.FallbackErrorHandler{
        FallbackSource: &recall.Hot{IDs: []string{"1", "2", "3"}},
    },
}
```

### 2. Labels-first å¯è§£é‡Šæ€§

**å…¨é“¾è·¯æ ‡ç­¾è¿½è¸ª**ï¼š
- æ¯ä¸ªç‰©å“è‡ªåŠ¨è®°å½•å¬å›æ¥æºã€æ’åºæ¨¡å‹ã€è¿‡æ»¤åŸå› ç­‰
- æ”¯æŒè‡ªå®šä¹‰ Label åˆå¹¶ç­–ç•¥
- æ”¯æŒ Label DSL è¡¨è¾¾å¼ï¼Œå®ç°ç­–ç•¥é©±åŠ¨

```go
// è‡ªåŠ¨è®°å½•æ ‡ç­¾
item.PutLabel("recall_source", utils.Label{Value: "hot", Source: "recall"})
item.PutLabel("rank_model", utils.Label{Value: "lr", Source: "rank"})

// ä½¿ç”¨ DSL è¡¨è¾¾å¼
eval := dsl.NewEval(item, rctx)
result, _ := eval.Evaluate(`label.recall_source == "hot" && item.score > 0.7`)
```

### 3. å®Œå…¨å¯æ‰©å±•

**æ‰€æœ‰ç­–ç•¥éƒ½é€šè¿‡æ¥å£å®ç°**ï¼š
- åˆå¹¶ç­–ç•¥ï¼šå®ç° `MergeStrategy` æ¥å£
- æ’åºç­–ç•¥ï¼šå®ç° `SortStrategy` æ¥å£
- ç›¸ä¼¼åº¦è®¡ç®—ï¼šå®ç° `SimilarityCalculator` æ¥å£
- é”™è¯¯å¤„ç†ï¼šå®ç° `ErrorHandler` æ¥å£
- åŠ¨æ€æ³¨å†Œï¼šé€šè¿‡ `NodeFactory` æ³¨å†Œè‡ªå®šä¹‰ Node

```go
// è‡ªå®šä¹‰åˆå¹¶ç­–ç•¥
type CustomMergeStrategy struct{}
func (s *CustomMergeStrategy) Merge(items []*core.Item, dedup bool) []*core.Item {
    // è‡ªå®šä¹‰é€»è¾‘ï¼šä¾‹å¦‚åªä¿ç•™åˆ†æ•°æœ€é«˜çš„ç‰©å“
}

// ä½¿ç”¨
fanout.MergeStrategy = &CustomMergeStrategy{}
```

### 4. Pipeline Hook æœºåˆ¶

**æ”¯æŒä¸­é—´ä»¶åŠŸèƒ½**ï¼š
- æ—¥å¿—è®°å½•
- æ€§èƒ½ç›‘æ§
- ç¼“å­˜
- æ•°æ®ç»Ÿè®¡

```go
type MetricsHook struct {
    startTime time.Time
}

func (h *MetricsHook) BeforeNode(ctx context.Context, rctx *core.RecommendContext, 
    node pipeline.Node, items []*core.Item) ([]*core.Item, error) {
    h.startTime = time.Now()
    return items, nil
}

func (h *MetricsHook) AfterNode(ctx context.Context, rctx *core.RecommendContext, 
    node pipeline.Node, items []*core.Item, err error) ([]*core.Item, error) {
    duration := time.Since(h.startTime)
    metrics.RecordNodeDuration(node.Name(), duration)
    return items, err
}
```

## ğŸ“¦ æ”¯æŒçš„ç®—æ³•å’Œæ¨¡å‹

### å¬å›ç®—æ³•

| ç®—æ³• | å®ç° | å·¥ä¸šåœ°ä½ | é€‚ç”¨åœºæ™¯ |
|------|------|---------|---------|
| **Item-CF** | `I2IRecall` | â­â­â­â­â­ å·¥ä¸šå¸¸é’æ ‘ | ç”µå•†ã€å†…å®¹æµ |
| **User-CF** | `U2IRecall` | â­â­â­ ç¦»çº¿åˆ†æ | å†·å¯åŠ¨è¡¥å…… |
| **MF/ALS** | `MFRecall` | â­â­â­â­ å¹¿æ³›ä½¿ç”¨ | çŸ©é˜µåˆ†è§£ |
| **Embedding** | `EmbRecall` | â­â­â­â­â­ ä¸»æµæ–¹æ¡ˆ | å‘é‡æ£€ç´¢ |
| **Content** | `ContentRecall` | â­â­â­â­ å†·å¯åŠ¨é¦–é€‰ | æ–°ç‰©å“æ¨è |
| **çƒ­é—¨** | `Hot` | â­â­â­â­â­ å¿…å¤‡ | å…œåº•å¬å› |
| **ç”¨æˆ·å†å²** | `UserHistory` | â­â­â­â­ ä¸ªæ€§åŒ– | åŸºäºè¡Œä¸º |

### æ’åºæ¨¡å‹

| æ¨¡å‹ | å®ç° | è¯´æ˜ |
|------|------|------|
| **LR** | `LRNode` | çº¿æ€§å›å½’ï¼Œå¿«é€Ÿä¸Šçº¿ |
| **DNN** | `DNNNode` | æ·±åº¦ç¥ç»ç½‘ç»œ |
| **Wide&Deep** | `WideDeepNode` | Wide&Deep æ¨¡å‹ |
| **DIN** | `DINNode` | Deep Interest Network |
| **Two Tower** | `TwoTowerNode` | åŒå¡”æ¨¡å‹ |
| **RPC** | `RPCNode` | å¤–éƒ¨æ¨¡å‹æœåŠ¡ï¼ˆXGBoostã€TF Serving ç­‰ï¼‰ |

## ğŸ”§ é…ç½®åŒ– Pipeline

æ”¯æŒä» YAML/JSON é…ç½®æ–‡ä»¶åŠ è½½ Pipelineï¼Œæ— éœ€ä¿®æ”¹ä»£ç ï¼š

```yaml
pipeline:
  name: "production_recommendation"
  nodes:
    - type: "recall.fanout"
      config:
        dedup: true
        timeout: 2
        max_concurrent: 5
        merge_strategy: "priority"
        sources:
          - type: "hot"
            ids: ["1", "2", "3", "4", "5"]
    
    - type: "filter"
      config:
        filters:
          - type: "blacklist"
            item_ids: ["100", "200"]
          - type: "exposed"
            key_prefix: "user:exposed"
            time_window: 604800
    
    - type: "feature.enrich"
      config:
        user_feature_prefix: "user_"
        item_feature_prefix: "item_"
    
    - type: "rank.lr"
      config:
        bias: 0.0
        weights:
          ctr: 1.2
          cvr: 0.8
    
    - type: "rerank.diversity"
      config:
        label_key: "category"
```

```go
cfg, _ := pipeline.LoadFromYAML("pipeline.yaml")
factory := config.DefaultFactory()
p, _ := cfg.BuildPipeline(factory)
items, _ := p.Run(ctx, rctx, nil)
```

## ğŸ“š æ–‡æ¡£

- [æ¶æ„è®¾è®¡æ–‡æ¡£](docs/ARCHITECTURE.md) - è¯¦ç»†æ¶æ„è®¾è®¡è¯´æ˜
- [å¬å›ç®—æ³•æ–‡æ¡£](docs/RECALL_ALGORITHMS.md) - å¬å›ç®—æ³•è¯¦è§£å’Œä½¿ç”¨æŒ‡å—
- [æ’åºæ¨¡å‹æ–‡æ¡£](docs/RANK_MODELS.md) - æ’åºæ¨¡å‹è¯¦è§£
- [æ¨¡å‹é€‰å‹æŒ‡å—](docs/MODEL_SELECTION.md) - æ¨èç³»ç»Ÿæ¨¡å‹é€‰å‹å‚è€ƒ
- [ååŒè¿‡æ»¤æ–‡æ¡£](docs/COLLABORATIVE_FILTERING.md) - ååŒè¿‡æ»¤ç®—æ³•è¯¦è§£
- [å¯æ‰©å±•æ€§åˆ†æ](docs/EXTENSIBILITY_ANALYSIS.md) - æ‰©å±•æŒ‡å—å’Œæœ€ä½³å®è·µ
- [ç”¨æˆ·ç”»åƒæ–‡æ¡£](docs/USER_PROFILE.md) - ç”¨æˆ·ç”»åƒä½¿ç”¨æŒ‡å—
- [AI Coding æŒ‡å—](CLAUDE.md) - AI è¾…åŠ©å¼€å‘æŒ‡å—

## ğŸ—‚ï¸ ç›®å½•ç»“æ„

```
github.com/rushteam/reckit/
â”œâ”€â”€ core/              # æ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆItem, Context, UserProfile, Configï¼‰
â”œâ”€â”€ pipeline/          # Pipeline å’Œ Node æ¥å£
â”œâ”€â”€ recall/            # å¬å›æ¨¡å—ï¼ˆSource, Fanout, CF, ANN, Content ç­‰ï¼‰
â”œâ”€â”€ filter/            # è¿‡æ»¤æ¨¡å—ï¼ˆBlacklist, UserBlock, Exposedï¼‰
â”œâ”€â”€ rank/              # æ’åºæ¨¡å—ï¼ˆLR, DNN, DIN, RPC ç­‰ï¼‰
â”œâ”€â”€ rerank/            # é‡æ’æ¨¡å—ï¼ˆDiversityï¼‰
â”œâ”€â”€ model/             # æ’åºæ¨¡å‹æŠ½è±¡å’Œå®ç°
â”œâ”€â”€ feature/            # ç‰¹å¾æœåŠ¡ï¼ˆEnrich, Service, Providerï¼‰
â”œâ”€â”€ store/             # å­˜å‚¨æŠ½è±¡ï¼ˆMemory, Redisï¼‰
â”œâ”€â”€ vector/            # å‘é‡æœåŠ¡ï¼ˆMilvusï¼‰
â”œâ”€â”€ service/           # ML æœåŠ¡ï¼ˆTF Serving, ANN Serviceï¼‰
â”œâ”€â”€ feast/             # Feast é›†æˆ
â”œâ”€â”€ config/            # Pipeline é…ç½®å·¥å‚
â”œâ”€â”€ pkg/
â”‚   â”œâ”€â”€ utils/         # Label å·¥å…·
â”‚   â””â”€â”€ dsl/           # Label DSL è¡¨è¾¾å¼å¼•æ“
â”œâ”€â”€ python/            # Python ML è®­ç»ƒä¸æœåŠ¡
â””â”€â”€ examples/          # ç¤ºä¾‹ä»£ç 
```

## ğŸ”§ ä¾èµ–

### Go ä¾èµ–

```go
require (
    github.com/google/cel-go v0.26.1
    github.com/redis/go-redis/v9 v9.5.1
    golang.org/x/sync v0.19.0
    gopkg.in/yaml.v3 v3.0.1
)
```

### Python ä¾èµ–

è§ `python/requirements.txt`ï¼š
- xgboost
- fastapi
- uvicorn
- pandas
- numpy
- scikit-learn

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·é˜…è¯» [è´¡çŒ®æŒ‡å—](CONTRIBUTING.md) äº†è§£è¯¦ç»†ä¿¡æ¯ã€‚

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [Apache License 2.0](LICENSE) è®¸å¯è¯ã€‚

---

<div align="center">

**Made with â¤ï¸ by [Rush Team](https://github.com/rushteam)**

[æ–‡æ¡£](README.md) â€¢ [ç¤ºä¾‹](examples/) â€¢ [é—®é¢˜åé¦ˆ](https://github.com/rushteam/reckit/issues)

</div>
